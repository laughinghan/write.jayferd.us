<div class="highlight"><pre><span class="c"># Debian apt-build(1) completion.</span>

have apt-build <span class="o">&amp;&amp;</span>
_apt_build<span class="o">()</span>
<span class="o">{</span>
    <span class="nb">local </span>cur prev special i

    <span class="nv">COMPREPLY</span><span class="o">=()</span>
    _get_comp_words_by_ref cur prev

    <span class="k">for</span> <span class="o">((</span> <span class="nv">i</span><span class="o">=</span>0; i &lt; <span class="k">${#</span><span class="nv">COMP_WORDS</span><span class="p">[@]</span><span class="k">}</span>-1; i++ <span class="o">))</span>; <span class="k">do</span>
<span class="k">        if</span> <span class="o">[[</span> <span class="k">${</span><span class="nv">COMP_WORDS</span><span class="p">[i]</span><span class="k">}</span> <span class="o">==</span> @<span class="o">(</span>install|remove|source|info|clean<span class="o">)</span> <span class="o">]]</span>; <span class="k">then</span>
<span class="k">            </span><span class="nv">special</span><span class="o">=</span><span class="k">${</span><span class="nv">COMP_WORDS</span><span class="p">[i]</span><span class="k">}</span>
        <span class="k">fi</span>
<span class="k">    done</span>

<span class="k">    if</span> <span class="o">[</span> -n <span class="s2">&quot;$special&quot;</span> <span class="o">]</span>; <span class="k">then</span>
<span class="k">        case</span> <span class="nv">$special</span> in
            install|source|info<span class="o">)</span>
                <span class="nv">COMPREPLY</span><span class="o">=(</span> <span class="k">$(</span> apt-cache pkgnames <span class="s2">&quot;$cur&quot;</span> 2&gt; /dev/null <span class="k">)</span> <span class="o">)</span>
                <span class="k">return </span>0
                ;;
            remove<span class="o">)</span>
                <span class="nv">COMPREPLY</span><span class="o">=(</span> <span class="k">$(</span> _comp_dpkg_installed_packages <span class="s2">&quot;$cur&quot;</span> <span class="k">)</span> <span class="o">)</span>
                <span class="k">return </span>0
                ;;
            *<span class="o">)</span>
                <span class="k">return </span>0
                ;;
        <span class="k">esac</span>
<span class="k">    fi</span>

<span class="k">    case</span> <span class="nv">$prev</span> in
         --patch|--build-dir|--repository-dir<span class="o">)</span>
               _filedir
               <span class="k">return </span>0
               ;;
         -h|--help<span class="o">)</span>
               <span class="k">return </span>0
               ;;
    <span class="k">esac</span>

<span class="k">    if</span> <span class="o">[[</span> <span class="s2">&quot;$cur&quot;</span> <span class="o">==</span> -* <span class="o">]]</span>; <span class="k">then</span>
<span class="k">        </span><span class="nv">COMPREPLY</span><span class="o">=(</span> <span class="k">$(</span> <span class="nb">compgen</span> -W <span class="s1">&#39;--help --show-upgraded -u --build-dir \</span>
<span class="s1">            --repository-dir --build-only --build-command --reinstall \</span>
<span class="s1">            --rebuild --remove-builddep --no-wrapper --purge --patch \</span>
<span class="s1">            --patch-strip -p --yes -y --version -v --no-source&#39;</span> -- <span class="s2">&quot;$cur&quot;</span> <span class="k">)</span> <span class="o">)</span>

    <span class="k">else</span>
<span class="k">        </span><span class="nv">COMPREPLY</span><span class="o">=(</span> <span class="k">$(</span> <span class="nb">compgen</span> -W <span class="s1">&#39;update upgrade install remove source \</span>
<span class="s1">            dist-upgrade world clean info clean-build update-repository&#39;</span> <span class="se">\</span>
            -- <span class="s2">&quot;$cur&quot;</span> <span class="k">)</span> <span class="o">)</span>
    <span class="k">fi</span>


<span class="k">    return </span>0
<span class="o">}</span> <span class="o">&amp;&amp;</span>
<span class="nb">complete</span> -F _apt_build -o filenames apt-build

<span class="c"># Local variables:</span>
<span class="c"># mode: shell-script</span>
<span class="c"># sh-basic-offset: 4</span>
<span class="c"># sh-indent-comment: t</span>
<span class="c"># indent-tabs-mode: nil</span>
<span class="c"># End:</span>
<span class="c"># ex: ts=4 sw=4 et filetype=sh</span>
</pre></div>
